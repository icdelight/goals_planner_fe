{"ast":null,"code":"import React from 'react';\nimport axios from 'axios';\nimport authReducer, { setCurrentUser } from 'auth/authSlice';\nimport { LAYOUT, MENU_BEHAVIOUR, NAV_COLOR, MENU_PLACEMENT, RADIUS, THEME_COLOR, USER_ROLE } from 'constants.js';\nimport { URL_SERVICE } from 'config.js';\nlet response = {\n  responseCode: 999,\n  responseDesc: \"\",\n  responseData: null\n};\nconst header = {\n  headers: {\n    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n  }\n};\nexport const Signin = async (email, password, dispatch) => {\n  const result = await axios.post(`${URL_SERVICE}auth/signin`, {\n    user: email,\n    pass: password\n  }).then(res => {\n    if (res) {\n      if (res.data) {\n        if (res.data.userData) {\n          if (res.data.userData.id && res.data.userData.fullname && res.data.userData.role && res.data.userData.name && res.data.tokens.access_token) {\n            const user = {\n              id: res.data.userData.id,\n              name: res.data.userData.fullname,\n              thumb: '/img/profile/profile-12.gif',\n              role: res.data.userData.role,\n              email: res.data.userData.name,\n              token: res.data.tokens.access_token\n            };\n            dispatch(setCurrentUser(user)); // authReducer.bind();\n\n            response = {\n              responseCode: res.data.statusCode,\n              responseDesc: res.data.message,\n              responseData: user\n            };\n          } else {\n            response = {\n              responseCode: 999,\n              responseDesc: 'Invalid response. 1',\n              responseData: null\n            };\n          }\n        } else {\n          response = {\n            responseCode: 999,\n            responseDesc: 'Invalid response. 2',\n            responseData: null\n          };\n        }\n      } else {\n        response = {\n          responseCode: 999,\n          responseDesc: 'Invalid response. 3',\n          responseData: null\n        };\n      }\n    } else {\n      response = {\n        responseCode: 999,\n        responseDesc: 'Failled to parse response.',\n        responseData: null\n      };\n    }\n\n    return response;\n  }).catch(function (error) {\n    if (error.response) {\n      // Request made and server responded\n      // console.log(error.response.data);\n      // console.log(error.response.status);\n      // console.log(error.response.headers);\n      response = {\n        responseCode: error.response.status,\n        responseDesc: error.response.data.message,\n        responseData: null\n      };\n    } else if (error.request) {\n      // The request was made but no response was received\n      // console.log(error.request);\n      response = {\n        responseCode: 999,\n        responseDesc: error.request,\n        responseData: null\n      };\n    } else {\n      // Something happened in setting up the request that triggered an Error\n      // console.log('Error', error.message);\n      response = {\n        responseCode: 999,\n        responseDesc: `Something went wrong, ${error.message}`,\n        responseData: null\n      };\n    }\n\n    return response;\n  });\n  return result;\n};\n_c = Signin;\nexport const Signup = async (username, email, password, dispatch) => {\n  const result = await axios.post(`${URL_SERVICE}auth/signup`, {\n    user: email,\n    pass: password,\n    firstname: username,\n    role: '2'\n  }).then(res => {\n    if (res) {\n      if (res.data) {\n        if (res.data.statusCode) {\n          response = {\n            responseCode: res.data.statusCode,\n            responseDesc: res.data.message,\n            responseData: null\n          };\n        } else {\n          response = {\n            responseCode: 999,\n            responseDesc: 'Invalid response. 2',\n            responseData: null\n          };\n        }\n      } else {\n        response = {\n          responseCode: 999,\n          responseDesc: 'Invalid response. 3',\n          responseData: null\n        };\n      }\n    } else {\n      response = {\n        responseCode: 999,\n        responseDesc: 'Failled to parse response.',\n        responseData: null\n      };\n    }\n\n    return response;\n  }).catch(function (error) {\n    if (error.response) {\n      // Request made and server responded\n      // console.log(error.response.data);\n      // console.log(error.response.status);\n      // console.log(error.response.headers);\n      response = {\n        responseCode: error.response.status,\n        responseDesc: error.response.data.message,\n        responseData: null\n      };\n    } else if (error.request) {\n      // The request was made but no response was received\n      // console.log(error.request);\n      response = {\n        responseCode: 999,\n        responseDesc: error.request,\n        responseData: null\n      };\n    } else {\n      // Something happened in setting up the request that triggered an Error\n      // console.log('Error', error.message);\n      response = {\n        responseCode: 999,\n        responseDesc: `Something went wrong, ${error.message}`,\n        responseData: null\n      };\n    }\n\n    return response;\n  });\n  return result;\n};\n_c2 = Signup;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Signin\");\n$RefreshReg$(_c2, \"Signup\");","map":{"version":3,"sources":["/Users/harmadini/Work/Free/React/goals_planner_fe/goals_planner_fe/src/services/signin.js"],"names":["React","axios","authReducer","setCurrentUser","LAYOUT","MENU_BEHAVIOUR","NAV_COLOR","MENU_PLACEMENT","RADIUS","THEME_COLOR","USER_ROLE","URL_SERVICE","response","responseCode","responseDesc","responseData","header","headers","Signin","email","password","dispatch","result","post","user","pass","then","res","data","userData","id","fullname","role","name","tokens","access_token","thumb","token","statusCode","message","catch","error","status","request","Signup","username","firstname"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport authReducer, { setCurrentUser } from 'auth/authSlice';\nimport { LAYOUT, MENU_BEHAVIOUR, NAV_COLOR, MENU_PLACEMENT, RADIUS, THEME_COLOR, USER_ROLE } from 'constants.js';\nimport { URL_SERVICE } from 'config.js';\n\nlet response = {\n    responseCode : 999,\n    responseDesc : \"\",\n    responseData : null,\n};\nconst header = {\n    headers: {\n        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n    }\n};\n\nexport const Signin = async (email,password,dispatch) => {\n    const result = await axios.post( `${URL_SERVICE}auth/signin`, { user: email, pass: password })\n    .then(res => {\n        if(res) {\n            if(res.data) {\n                if(res.data.userData) {\n                    if(res.data.userData.id && res.data.userData.fullname && res.data.userData.role && res.data.userData.name && res.data.tokens.access_token) {\n                        const user = {\n                            id: res.data.userData.id,\n                            name: res.data.userData.fullname,\n                            thumb: '/img/profile/profile-12.gif',\n                            role: res.data.userData.role,\n                            email: res.data.userData.name,\n                            token: res.data.tokens.access_token,\n                        };\n                        dispatch(setCurrentUser(user));\n                        // authReducer.bind();\n                        response = {\n                            responseCode : res.data.statusCode,\n                            responseDesc : res.data.message,\n                            responseData : user,\n                        };\n                    }else{\n                        response = {\n                            responseCode : 999,\n                            responseDesc : 'Invalid response. 1',\n                            responseData : null,\n                        };\n                    }\n                }else{\n                    response = {\n                        responseCode : 999,\n                        responseDesc : 'Invalid response. 2',\n                        responseData : null,\n                    };\n                }\n            }else{\n                response = {\n                    responseCode : 999,\n                    responseDesc : 'Invalid response. 3',\n                    responseData : null,\n                };\n            }\n        }else{\n            response = {\n                responseCode : 999,\n                responseDesc : 'Failled to parse response.',\n                responseData : null,\n            };\n        }\n        return response;\n    })\n    .catch( function(error) {\n        if (error.response) {\n            // Request made and server responded\n            // console.log(error.response.data);\n            // console.log(error.response.status);\n            // console.log(error.response.headers);\n            response = {\n                responseCode : error.response.status,\n                responseDesc : error.response.data.message,\n                responseData : null,\n            };\n        } else if (error.request) {\n            // The request was made but no response was received\n            // console.log(error.request);\n            response = {\n                responseCode : 999,\n                responseDesc : error.request,\n                responseData : null,\n            };\n        } else {\n            // Something happened in setting up the request that triggered an Error\n            // console.log('Error', error.message);\n            response = {\n                responseCode : 999,\n                responseDesc : `Something went wrong, ${error.message}`,\n                responseData : null,\n            };\n        }  \n        return response; \n    });\n    return result;\n}\n\nexport const Signup = async (username,email,password,dispatch) => {\n    const result = await axios.post( `${URL_SERVICE}auth/signup`, { user: email, pass: password, firstname: username, role: '2' })\n    .then(res => {\n        if(res) {\n            if(res.data) {\n                if(res.data.statusCode) {\n                    response = {\n                        responseCode : res.data.statusCode,\n                        responseDesc : res.data.message,\n                        responseData : null,\n                    };\n                }else{\n                    response = {\n                        responseCode : 999,\n                        responseDesc : 'Invalid response. 2',\n                        responseData : null,\n                    };\n                }\n            }else{\n                response = {\n                    responseCode : 999,\n                    responseDesc : 'Invalid response. 3',\n                    responseData : null,\n                };\n            }\n        }else{\n            response = {\n                responseCode : 999,\n                responseDesc : 'Failled to parse response.',\n                responseData : null,\n            };\n        }\n        return response;\n    })\n    .catch( function(error) {\n        if (error.response) {\n            // Request made and server responded\n            // console.log(error.response.data);\n            // console.log(error.response.status);\n            // console.log(error.response.headers);\n            response = {\n                responseCode : error.response.status,\n                responseDesc : error.response.data.message,\n                responseData : null,\n            };\n        } else if (error.request) {\n            // The request was made but no response was received\n            // console.log(error.request);\n            response = {\n                responseCode : 999,\n                responseDesc : error.request,\n                responseData : null,\n            };\n        } else {\n            // Something happened in setting up the request that triggered an Error\n            // console.log('Error', error.message);\n            response = {\n                responseCode : 999,\n                responseDesc : `Something went wrong, ${error.message}`,\n                responseData : null,\n            };\n        }  \n        return response; \n    });\n    return result;\n}"]},"metadata":{},"sourceType":"module"}