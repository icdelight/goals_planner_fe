{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/harmadini/Work/Free/React/goals_planner_fe/goals_planner_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _service = require(\"./service\");\n\nvar _jsonDigger = _interopRequireDefault(require(\"json-digger\"));\n\nvar _html2canvas = _interopRequireDefault(require(\"html2canvas\"));\n\nvar _jspdf = _interopRequireDefault(require(\"jspdf\"));\n\nvar _ChartNode = _interopRequireDefault(require(\"./ChartNode\"));\n\nrequire(\"./ChartContainer.css\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nvar propTypes = {\n  datasource: _propTypes.default.object.isRequired,\n  pan: _propTypes.default.bool,\n  zoom: _propTypes.default.bool,\n  zoomoutLimit: _propTypes.default.number,\n  zoominLimit: _propTypes.default.number,\n  containerClass: _propTypes.default.string,\n  chartClass: _propTypes.default.string,\n  NodeTemplate: _propTypes.default.elementType,\n  draggable: _propTypes.default.bool,\n  collapsible: _propTypes.default.bool,\n  multipleSelect: _propTypes.default.bool,\n  onClickNode: _propTypes.default.func,\n  onClickChart: _propTypes.default.func\n};\nvar defaultProps = {\n  pan: false,\n  zoom: false,\n  zoomoutLimit: 0.5,\n  zoominLimit: 7,\n  containerClass: \"\",\n  chartClass: \"\",\n  draggable: false,\n  collapsible: true,\n  multipleSelect: false\n};\nvar ChartContainer = (0, _react.forwardRef)(function (_ref, ref) {\n  var datasource = _ref.datasource,\n      pan = _ref.pan,\n      zoom = _ref.zoom,\n      zoomoutLimit = _ref.zoomoutLimit,\n      zoominLimit = _ref.zoominLimit,\n      containerClass = _ref.containerClass,\n      chartClass = _ref.chartClass,\n      NodeTemplate = _ref.NodeTemplate,\n      draggable = _ref.draggable,\n      collapsible = _ref.collapsible,\n      multipleSelect = _ref.multipleSelect,\n      onClickNode = _ref.onClickNode,\n      onClickChart = _ref.onClickChart;\n  var container = (0, _react.useRef)();\n  var chart = (0, _react.useRef)();\n  var downloadButton = (0, _react.useRef)();\n\n  var _useState = (0, _react.useState)(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      startX = _useState2[0],\n      setStartX = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      startY = _useState4[0],\n      setStartY = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      transform = _useState6[0],\n      setTransform = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      panning = _useState8[0],\n      setPanning = _useState8[1];\n\n  var _useState9 = (0, _react.useState)(\"default\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      cursor = _useState10[0],\n      setCursor = _useState10[1];\n\n  var _useState11 = (0, _react.useState)(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      exporting = _useState12[0],\n      setExporting = _useState12[1];\n\n  var _useState13 = (0, _react.useState)(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      dataURL = _useState14[0],\n      setDataURL = _useState14[1];\n\n  var _useState15 = (0, _react.useState)(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      download = _useState16[0],\n      setDownload = _useState16[1];\n\n  var attachRel = function attachRel(data, flags) {\n    data.relationship = flags + (data.children && data.children.length > 0 ? 1 : 0);\n\n    if (data.children) {\n      data.children.forEach(function (item) {\n        attachRel(item, \"1\" + (data.children.length > 1 ? 1 : 0));\n      });\n    }\n\n    return data;\n  };\n\n  var _useState17 = (0, _react.useState)(datasource),\n      _useState18 = _slicedToArray(_useState17, 2),\n      ds = _useState18[0],\n      setDS = _useState18[1];\n\n  (0, _react.useEffect)(function () {\n    setDS(datasource);\n  }, [datasource]);\n  var dsDigger = new _jsonDigger.default(datasource, \"id\", \"children\");\n\n  var clickChartHandler = function clickChartHandler(event) {\n    if (!event.target.closest(\".oc-node\")) {\n      if (onClickChart) {\n        onClickChart();\n      }\n\n      _service.selectNodeService.clearSelectedNodeInfo();\n    }\n  };\n\n  var panEndHandler = function panEndHandler() {\n    setPanning(false);\n    setCursor(\"default\");\n  };\n\n  var panHandler = function panHandler(e) {\n    var newX = 0;\n    var newY = 0;\n\n    if (!e.targetTouches) {\n      // pand on desktop\n      newX = e.pageX - startX;\n      newY = e.pageY - startY;\n    } else if (e.targetTouches.length === 1) {\n      // pan on mobile device\n      newX = e.targetTouches[0].pageX - startX;\n      newY = e.targetTouches[0].pageY - startY;\n    } else if (e.targetTouches.length > 1) {\n      return;\n    }\n\n    if (transform === \"\") {\n      if (transform.indexOf(\"3d\") === -1) {\n        setTransform(\"matrix(1,0,0,1,\" + newX + \",\" + newY + \")\");\n      } else {\n        setTransform(\"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,\" + newX + \", \" + newY + \",0,1)\");\n      }\n    } else {\n      var matrix = transform.split(\",\");\n\n      if (transform.indexOf(\"3d\") === -1) {\n        matrix[4] = newX;\n        matrix[5] = newY + \")\";\n      } else {\n        matrix[12] = newX;\n        matrix[13] = newY;\n      }\n\n      setTransform(matrix.join(\",\"));\n    }\n  };\n\n  var panStartHandler = function panStartHandler(e) {\n    if (e.target.closest(\".oc-node\")) {\n      setPanning(false);\n      return;\n    } else {\n      setPanning(true);\n      setCursor(\"move\");\n    }\n\n    var lastX = 0;\n    var lastY = 0;\n\n    if (transform !== \"\") {\n      var matrix = transform.split(\",\");\n\n      if (transform.indexOf(\"3d\") === -1) {\n        lastX = parseInt(matrix[4]);\n        lastY = parseInt(matrix[5]);\n      } else {\n        lastX = parseInt(matrix[12]);\n        lastY = parseInt(matrix[13]);\n      }\n    }\n\n    if (!e.targetTouches) {\n      // pand on desktop\n      setStartX(e.pageX - lastX);\n      setStartY(e.pageY - lastY);\n    } else if (e.targetTouches.length === 1) {\n      // pan on mobile device\n      setStartX(e.targetTouches[0].pageX - lastX);\n      setStartY(e.targetTouches[0].pageY - lastY);\n    } else if (e.targetTouches.length > 1) {\n      return;\n    }\n  };\n\n  var updateChartScale = function updateChartScale(newScale) {\n    var matrix = [];\n    var targetScale = 1;\n\n    if (transform === \"\") {\n      setTransform(\"matrix(\" + newScale + \", 0, 0, \" + newScale + \", 0, 0)\");\n    } else {\n      matrix = transform.split(\",\");\n\n      if (transform.indexOf(\"3d\") === -1) {\n        targetScale = Math.abs(window.parseFloat(matrix[3]) * newScale);\n\n        if (targetScale > zoomoutLimit && targetScale < zoominLimit) {\n          matrix[0] = \"matrix(\" + targetScale;\n          matrix[3] = targetScale;\n          setTransform(matrix.join(\",\"));\n        }\n      } else {\n        targetScale = Math.abs(window.parseFloat(matrix[5]) * newScale);\n\n        if (targetScale > zoomoutLimit && targetScale < zoominLimit) {\n          matrix[0] = \"matrix3d(\" + targetScale;\n          matrix[5] = targetScale;\n          setTransform(matrix.join(\",\"));\n        }\n      }\n    }\n  };\n\n  var zoomHandler = function zoomHandler(e) {\n    var newScale = 1 + (e.deltaY > 0 ? -0.2 : 0.2);\n    updateChartScale(newScale);\n  };\n\n  var exportPDF = function exportPDF(canvas, exportFilename) {\n    var canvasWidth = Math.floor(canvas.width);\n    var canvasHeight = Math.floor(canvas.height);\n    var doc = canvasWidth > canvasHeight ? new _jspdf.default({\n      orientation: \"landscape\",\n      unit: \"px\",\n      format: [canvasWidth, canvasHeight]\n    }) : new _jspdf.default({\n      orientation: \"portrait\",\n      unit: \"px\",\n      format: [canvasHeight, canvasWidth]\n    });\n    doc.addImage(canvas.toDataURL(\"image/jpeg\", 1.0), \"JPEG\", 0, 0);\n    doc.save(exportFilename + \".pdf\");\n  };\n\n  var exportPNG = function exportPNG(canvas, exportFilename) {\n    var isWebkit = (\"WebkitAppearance\" in document.documentElement.style);\n    var isFf = !!window.sidebar;\n    var isEdge = navigator.appName === \"Microsoft Internet Explorer\" || navigator.appName === \"Netscape\" && navigator.appVersion.indexOf(\"Edge\") > -1;\n\n    if (!isWebkit && !isFf || isEdge) {\n      window.navigator.msSaveBlob(canvas.msToBlob(), exportFilename + \".png\");\n    } else {\n      setDataURL(canvas.toDataURL());\n      setDownload(exportFilename + \".png\");\n      downloadButton.current.click();\n    }\n  };\n\n  var changeHierarchy = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(draggedItemData, dropTargetId) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return dsDigger.removeNode(draggedItemData.id);\n\n            case 2:\n              _context.next = 4;\n              return dsDigger.addChildren(dropTargetId, draggedItemData);\n\n            case 4:\n              setDS(_objectSpread({}, dsDigger.ds));\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function changeHierarchy(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  (0, _react.useImperativeHandle)(ref, function () {\n    return {\n      exportTo: function exportTo(exportFilename, exportFileextension) {\n        exportFilename = exportFilename || \"OrgChart\";\n        exportFileextension = exportFileextension || \"png\";\n        setExporting(true);\n        var originalScrollLeft = container.current.scrollLeft;\n        container.current.scrollLeft = 0;\n        var originalScrollTop = container.current.scrollTop;\n        container.current.scrollTop = 0;\n        (0, _html2canvas.default)(chart.current, {\n          width: chart.current.clientWidth,\n          height: chart.current.clientHeight,\n          onclone: function onclone(clonedDoc) {\n            clonedDoc.querySelector(\".orgchart\").style.background = \"none\";\n            clonedDoc.querySelector(\".orgchart\").style.transform = \"\";\n          }\n        }).then(function (canvas) {\n          if (exportFileextension.toLowerCase() === \"pdf\") {\n            exportPDF(canvas, exportFilename);\n          } else {\n            exportPNG(canvas, exportFilename);\n          }\n\n          setExporting(false);\n          container.current.scrollLeft = originalScrollLeft;\n          container.current.scrollTop = originalScrollTop;\n        }, function () {\n          setExporting(false);\n          container.current.scrollLeft = originalScrollLeft;\n          container.current.scrollTop = originalScrollTop;\n        });\n      },\n      expandAllNodes: function expandAllNodes() {\n        chart.current.querySelectorAll(\".oc-node.hidden, .oc-hierarchy.hidden, .isSiblingsCollapsed, .isAncestorsCollapsed\").forEach(function (el) {\n          el.classList.remove(\"hidden\", \"isSiblingsCollapsed\", \"isAncestorsCollapsed\");\n        });\n      }\n    };\n  });\n  return _react.default.createElement(\"div\", {\n    ref: container,\n    className: \"orgchart-container \" + containerClass,\n    onWheel: zoom ? zoomHandler : undefined,\n    onMouseUp: pan && panning ? panEndHandler : undefined\n  }, _react.default.createElement(\"div\", {\n    ref: chart,\n    className: \"orgchart \" + chartClass,\n    style: {\n      transform: transform,\n      cursor: cursor\n    },\n    onClick: clickChartHandler,\n    onMouseDown: pan ? panStartHandler : undefined,\n    onMouseMove: pan && panning ? panHandler : undefined\n  }, _react.default.createElement(\"ul\", null, _react.default.createElement(_ChartNode.default, {\n    datasource: attachRel(ds, \"00\"),\n    NodeTemplate: NodeTemplate,\n    draggable: draggable,\n    collapsible: collapsible,\n    multipleSelect: multipleSelect,\n    changeHierarchy: changeHierarchy,\n    onClickNode: onClickNode\n  }))), _react.default.createElement(\"a\", {\n    className: \"oc-download-btn hidden\",\n    ref: downloadButton,\n    href: dataURL,\n    download: download\n  }, \"\\xA0\"), _react.default.createElement(\"div\", {\n    className: \"oc-mask \".concat(exporting ? \"\" : \"hidden\")\n  }, _react.default.createElement(\"i\", {\n    className: \"oci oci-spinner spinner\"\n  })));\n});\nChartContainer.propTypes = propTypes;\nChartContainer.defaultProps = defaultProps;\nvar _default = ChartContainer;\nexports.default = _default;","map":{"version":3,"sources":["/Users/harmadini/Work/Free/React/goals_planner_fe/goals_planner_fe/node_modules/@dabeng/react-orgchart/dist/ChartContainer.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","default","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_service","_jsonDigger","_html2canvas","_jspdf","_ChartNode","__esModule","_getRequireWildcardCache","WeakMap","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","err","undefined","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","toString","_arr","_n","_d","_e","_i","_s","next","Array","isArray","propTypes","datasource","isRequired","pan","bool","zoom","zoomoutLimit","number","zoominLimit","containerClass","string","chartClass","NodeTemplate","elementType","draggable","collapsible","multipleSelect","onClickNode","func","onClickChart","defaultProps","ChartContainer","forwardRef","_ref","ref","container","useRef","chart","downloadButton","_useState","useState","_useState2","startX","setStartX","_useState3","_useState4","startY","setStartY","_useState5","_useState6","transform","setTransform","_useState7","_useState8","panning","setPanning","_useState9","_useState10","cursor","setCursor","_useState11","_useState12","exporting","setExporting","_useState13","_useState14","dataURL","setDataURL","_useState15","_useState16","download","setDownload","attachRel","data","flags","relationship","children","item","_useState17","_useState18","ds","setDS","useEffect","dsDigger","clickChartHandler","event","closest","selectNodeService","clearSelectedNodeInfo","panEndHandler","panHandler","e","newX","newY","targetTouches","pageX","pageY","indexOf","matrix","split","join","panStartHandler","lastX","lastY","parseInt","updateChartScale","newScale","targetScale","Math","abs","window","parseFloat","zoomHandler","deltaY","exportPDF","canvas","exportFilename","canvasWidth","floor","width","canvasHeight","height","doc","orientation","unit","format","addImage","toDataURL","save","exportPNG","isWebkit","document","documentElement","style","isFf","sidebar","isEdge","navigator","appName","appVersion","msSaveBlob","msToBlob","current","click","changeHierarchy","_ref2","mark","_callee","draggedItemData","dropTargetId","wrap","_callee$","_context","prev","removeNode","id","addChildren","stop","_x","_x2","useImperativeHandle","exportTo","exportFileextension","originalScrollLeft","scrollLeft","originalScrollTop","scrollTop","clientWidth","clientHeight","onclone","clonedDoc","querySelector","background","toLowerCase","expandAllNodes","querySelectorAll","el","classList","remove","createElement","className","onWheel","onMouseUp","onClick","onMouseDown","onMouseMove","href","concat","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _service = require(\"./service\");\n\nvar _jsonDigger = _interopRequireDefault(require(\"json-digger\"));\n\nvar _html2canvas = _interopRequireDefault(require(\"html2canvas\"));\n\nvar _jspdf = _interopRequireDefault(require(\"jspdf\"));\n\nvar _ChartNode = _interopRequireDefault(require(\"./ChartNode\"));\n\nrequire(\"./ChartContainer.css\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar propTypes = {\n  datasource: _propTypes.default.object.isRequired,\n  pan: _propTypes.default.bool,\n  zoom: _propTypes.default.bool,\n  zoomoutLimit: _propTypes.default.number,\n  zoominLimit: _propTypes.default.number,\n  containerClass: _propTypes.default.string,\n  chartClass: _propTypes.default.string,\n  NodeTemplate: _propTypes.default.elementType,\n  draggable: _propTypes.default.bool,\n  collapsible: _propTypes.default.bool,\n  multipleSelect: _propTypes.default.bool,\n  onClickNode: _propTypes.default.func,\n  onClickChart: _propTypes.default.func\n};\nvar defaultProps = {\n  pan: false,\n  zoom: false,\n  zoomoutLimit: 0.5,\n  zoominLimit: 7,\n  containerClass: \"\",\n  chartClass: \"\",\n  draggable: false,\n  collapsible: true,\n  multipleSelect: false\n};\nvar ChartContainer = (0, _react.forwardRef)(function (_ref, ref) {\n  var datasource = _ref.datasource,\n      pan = _ref.pan,\n      zoom = _ref.zoom,\n      zoomoutLimit = _ref.zoomoutLimit,\n      zoominLimit = _ref.zoominLimit,\n      containerClass = _ref.containerClass,\n      chartClass = _ref.chartClass,\n      NodeTemplate = _ref.NodeTemplate,\n      draggable = _ref.draggable,\n      collapsible = _ref.collapsible,\n      multipleSelect = _ref.multipleSelect,\n      onClickNode = _ref.onClickNode,\n      onClickChart = _ref.onClickChart;\n  var container = (0, _react.useRef)();\n  var chart = (0, _react.useRef)();\n  var downloadButton = (0, _react.useRef)();\n\n  var _useState = (0, _react.useState)(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      startX = _useState2[0],\n      setStartX = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      startY = _useState4[0],\n      setStartY = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      transform = _useState6[0],\n      setTransform = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      panning = _useState8[0],\n      setPanning = _useState8[1];\n\n  var _useState9 = (0, _react.useState)(\"default\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      cursor = _useState10[0],\n      setCursor = _useState10[1];\n\n  var _useState11 = (0, _react.useState)(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      exporting = _useState12[0],\n      setExporting = _useState12[1];\n\n  var _useState13 = (0, _react.useState)(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      dataURL = _useState14[0],\n      setDataURL = _useState14[1];\n\n  var _useState15 = (0, _react.useState)(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      download = _useState16[0],\n      setDownload = _useState16[1];\n\n  var attachRel = function attachRel(data, flags) {\n    data.relationship = flags + (data.children && data.children.length > 0 ? 1 : 0);\n\n    if (data.children) {\n      data.children.forEach(function (item) {\n        attachRel(item, \"1\" + (data.children.length > 1 ? 1 : 0));\n      });\n    }\n\n    return data;\n  };\n\n  var _useState17 = (0, _react.useState)(datasource),\n      _useState18 = _slicedToArray(_useState17, 2),\n      ds = _useState18[0],\n      setDS = _useState18[1];\n\n  (0, _react.useEffect)(function () {\n    setDS(datasource);\n  }, [datasource]);\n  var dsDigger = new _jsonDigger.default(datasource, \"id\", \"children\");\n\n  var clickChartHandler = function clickChartHandler(event) {\n    if (!event.target.closest(\".oc-node\")) {\n      if (onClickChart) {\n        onClickChart();\n      }\n\n      _service.selectNodeService.clearSelectedNodeInfo();\n    }\n  };\n\n  var panEndHandler = function panEndHandler() {\n    setPanning(false);\n    setCursor(\"default\");\n  };\n\n  var panHandler = function panHandler(e) {\n    var newX = 0;\n    var newY = 0;\n\n    if (!e.targetTouches) {\n      // pand on desktop\n      newX = e.pageX - startX;\n      newY = e.pageY - startY;\n    } else if (e.targetTouches.length === 1) {\n      // pan on mobile device\n      newX = e.targetTouches[0].pageX - startX;\n      newY = e.targetTouches[0].pageY - startY;\n    } else if (e.targetTouches.length > 1) {\n      return;\n    }\n\n    if (transform === \"\") {\n      if (transform.indexOf(\"3d\") === -1) {\n        setTransform(\"matrix(1,0,0,1,\" + newX + \",\" + newY + \")\");\n      } else {\n        setTransform(\"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,\" + newX + \", \" + newY + \",0,1)\");\n      }\n    } else {\n      var matrix = transform.split(\",\");\n\n      if (transform.indexOf(\"3d\") === -1) {\n        matrix[4] = newX;\n        matrix[5] = newY + \")\";\n      } else {\n        matrix[12] = newX;\n        matrix[13] = newY;\n      }\n\n      setTransform(matrix.join(\",\"));\n    }\n  };\n\n  var panStartHandler = function panStartHandler(e) {\n    if (e.target.closest(\".oc-node\")) {\n      setPanning(false);\n      return;\n    } else {\n      setPanning(true);\n      setCursor(\"move\");\n    }\n\n    var lastX = 0;\n    var lastY = 0;\n\n    if (transform !== \"\") {\n      var matrix = transform.split(\",\");\n\n      if (transform.indexOf(\"3d\") === -1) {\n        lastX = parseInt(matrix[4]);\n        lastY = parseInt(matrix[5]);\n      } else {\n        lastX = parseInt(matrix[12]);\n        lastY = parseInt(matrix[13]);\n      }\n    }\n\n    if (!e.targetTouches) {\n      // pand on desktop\n      setStartX(e.pageX - lastX);\n      setStartY(e.pageY - lastY);\n    } else if (e.targetTouches.length === 1) {\n      // pan on mobile device\n      setStartX(e.targetTouches[0].pageX - lastX);\n      setStartY(e.targetTouches[0].pageY - lastY);\n    } else if (e.targetTouches.length > 1) {\n      return;\n    }\n  };\n\n  var updateChartScale = function updateChartScale(newScale) {\n    var matrix = [];\n    var targetScale = 1;\n\n    if (transform === \"\") {\n      setTransform(\"matrix(\" + newScale + \", 0, 0, \" + newScale + \", 0, 0)\");\n    } else {\n      matrix = transform.split(\",\");\n\n      if (transform.indexOf(\"3d\") === -1) {\n        targetScale = Math.abs(window.parseFloat(matrix[3]) * newScale);\n\n        if (targetScale > zoomoutLimit && targetScale < zoominLimit) {\n          matrix[0] = \"matrix(\" + targetScale;\n          matrix[3] = targetScale;\n          setTransform(matrix.join(\",\"));\n        }\n      } else {\n        targetScale = Math.abs(window.parseFloat(matrix[5]) * newScale);\n\n        if (targetScale > zoomoutLimit && targetScale < zoominLimit) {\n          matrix[0] = \"matrix3d(\" + targetScale;\n          matrix[5] = targetScale;\n          setTransform(matrix.join(\",\"));\n        }\n      }\n    }\n  };\n\n  var zoomHandler = function zoomHandler(e) {\n    var newScale = 1 + (e.deltaY > 0 ? -0.2 : 0.2);\n    updateChartScale(newScale);\n  };\n\n  var exportPDF = function exportPDF(canvas, exportFilename) {\n    var canvasWidth = Math.floor(canvas.width);\n    var canvasHeight = Math.floor(canvas.height);\n    var doc = canvasWidth > canvasHeight ? new _jspdf.default({\n      orientation: \"landscape\",\n      unit: \"px\",\n      format: [canvasWidth, canvasHeight]\n    }) : new _jspdf.default({\n      orientation: \"portrait\",\n      unit: \"px\",\n      format: [canvasHeight, canvasWidth]\n    });\n    doc.addImage(canvas.toDataURL(\"image/jpeg\", 1.0), \"JPEG\", 0, 0);\n    doc.save(exportFilename + \".pdf\");\n  };\n\n  var exportPNG = function exportPNG(canvas, exportFilename) {\n    var isWebkit = \"WebkitAppearance\" in document.documentElement.style;\n    var isFf = !!window.sidebar;\n    var isEdge = navigator.appName === \"Microsoft Internet Explorer\" || navigator.appName === \"Netscape\" && navigator.appVersion.indexOf(\"Edge\") > -1;\n\n    if (!isWebkit && !isFf || isEdge) {\n      window.navigator.msSaveBlob(canvas.msToBlob(), exportFilename + \".png\");\n    } else {\n      setDataURL(canvas.toDataURL());\n      setDownload(exportFilename + \".png\");\n      downloadButton.current.click();\n    }\n  };\n\n  var changeHierarchy =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee(draggedItemData, dropTargetId) {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return dsDigger.removeNode(draggedItemData.id);\n\n            case 2:\n              _context.next = 4;\n              return dsDigger.addChildren(dropTargetId, draggedItemData);\n\n            case 4:\n              setDS(_objectSpread({}, dsDigger.ds));\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function changeHierarchy(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  (0, _react.useImperativeHandle)(ref, function () {\n    return {\n      exportTo: function exportTo(exportFilename, exportFileextension) {\n        exportFilename = exportFilename || \"OrgChart\";\n        exportFileextension = exportFileextension || \"png\";\n        setExporting(true);\n        var originalScrollLeft = container.current.scrollLeft;\n        container.current.scrollLeft = 0;\n        var originalScrollTop = container.current.scrollTop;\n        container.current.scrollTop = 0;\n        (0, _html2canvas.default)(chart.current, {\n          width: chart.current.clientWidth,\n          height: chart.current.clientHeight,\n          onclone: function onclone(clonedDoc) {\n            clonedDoc.querySelector(\".orgchart\").style.background = \"none\";\n            clonedDoc.querySelector(\".orgchart\").style.transform = \"\";\n          }\n        }).then(function (canvas) {\n          if (exportFileextension.toLowerCase() === \"pdf\") {\n            exportPDF(canvas, exportFilename);\n          } else {\n            exportPNG(canvas, exportFilename);\n          }\n\n          setExporting(false);\n          container.current.scrollLeft = originalScrollLeft;\n          container.current.scrollTop = originalScrollTop;\n        }, function () {\n          setExporting(false);\n          container.current.scrollLeft = originalScrollLeft;\n          container.current.scrollTop = originalScrollTop;\n        });\n      },\n      expandAllNodes: function expandAllNodes() {\n        chart.current.querySelectorAll(\".oc-node.hidden, .oc-hierarchy.hidden, .isSiblingsCollapsed, .isAncestorsCollapsed\").forEach(function (el) {\n          el.classList.remove(\"hidden\", \"isSiblingsCollapsed\", \"isAncestorsCollapsed\");\n        });\n      }\n    };\n  });\n  return _react.default.createElement(\"div\", {\n    ref: container,\n    className: \"orgchart-container \" + containerClass,\n    onWheel: zoom ? zoomHandler : undefined,\n    onMouseUp: pan && panning ? panEndHandler : undefined\n  }, _react.default.createElement(\"div\", {\n    ref: chart,\n    className: \"orgchart \" + chartClass,\n    style: {\n      transform: transform,\n      cursor: cursor\n    },\n    onClick: clickChartHandler,\n    onMouseDown: pan ? panStartHandler : undefined,\n    onMouseMove: pan && panning ? panHandler : undefined\n  }, _react.default.createElement(\"ul\", null, _react.default.createElement(_ChartNode.default, {\n    datasource: attachRel(ds, \"00\"),\n    NodeTemplate: NodeTemplate,\n    draggable: draggable,\n    collapsible: collapsible,\n    multipleSelect: multipleSelect,\n    changeHierarchy: changeHierarchy,\n    onClickNode: onClickNode\n  }))), _react.default.createElement(\"a\", {\n    className: \"oc-download-btn hidden\",\n    ref: downloadButton,\n    href: dataURL,\n    download: download\n  }, \"\\xA0\"), _react.default.createElement(\"div\", {\n    className: \"oc-mask \".concat(exporting ? \"\" : \"hidden\")\n  }, _react.default.createElement(\"i\", {\n    className: \"oci oci-spinner spinner\"\n  })));\n});\nChartContainer.propTypes = propTypes;\nChartContainer.defaultProps = defaultProps;\nvar _default = ChartContainer;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}