{"ast":null,"code":"var _jsxFileName = \"/Users/harmadini/Work/Free/React/goals_planner_fe/goals_planner_fe/src/layout/nav/search/SearchInput.js\",\n    _s = $RefreshSig$();\n\nimport React, { useMemo, useState, useEffect, useRef } from 'react';\nimport classNames from 'classnames';\nimport FuzzyHighlighter from 'react-fuzzy-highlighter';\nimport { useIntl } from 'react-intl';\nimport { useHistory } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { getSearchItems } from 'routing/helper';\nimport { USE_MULTI_LANGUAGE } from 'config.js';\nimport routesAndMenuItems from 'routes.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RESULT_LIMIT = 10;\n\nconst SearchInput = ({\n  show,\n  setShow\n}) => {\n  _s();\n\n  const history = useHistory();\n  const searchInput = useRef(null);\n  const [data, setData] = useState(null);\n  const [query, setQuery] = useState('');\n  const [selectedIndex, setSelectedIndex] = useState(null);\n  const resultCount = React.useRef(0);\n  const selectedItem = React.useRef({});\n  const mySelectedIndexRef = React.useRef(selectedIndex);\n\n  const setMySelectedIndex = currenData => {\n    mySelectedIndexRef.current = currenData;\n    setSelectedIndex(currenData);\n  };\n\n  const {\n    isLogin,\n    currentUser\n  } = useSelector(state => state.auth);\n  const routes = useMemo(() => getSearchItems({\n    data: routesAndMenuItems,\n    isLogin,\n    userRole: currentUser.role\n  })(), [isLogin, currentUser]);\n  const {\n    formatMessage: f\n  } = useIntl();\n\n  const onResultClick = path => {\n    if (path) {\n      setShow(false);\n      history.push(path);\n    }\n  };\n\n  const onKeyDown = e => {\n    if (![38, 40, 13].includes(e.keyCode)) {\n      return;\n    }\n\n    const rCount = resultCount.current;\n    const sIndex = mySelectedIndexRef.current;\n    if (rCount <= 0) return;\n\n    if (sIndex === null) {\n      setMySelectedIndex(0);\n      return;\n    }\n\n    if (e.keyCode === 38) {\n      // up\n      setMySelectedIndex(sIndex <= 0 ? rCount - 1 : sIndex - 1);\n    } else if (e.keyCode === 40) {\n      // down\n      setMySelectedIndex(sIndex >= rCount - 1 ? 0 : sIndex + 1);\n    } else {\n      // enter\n      const sCurrent = selectedItem.current;\n\n      if (sCurrent) {\n        onResultClick(sCurrent.path);\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (USE_MULTI_LANGUAGE) {\n      const formatedRoutes = routes.map(d => ({ ...d,\n        label: f({\n          id: d.label || 'menu.home'\n        })\n      }));\n      setData(formatedRoutes);\n    } else {\n      setData(routes);\n    }\n\n    document.addEventListener('keydown', onKeyDown);\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n    }; // eslint-disable-next-line\n  }, []);\n  useEffect(() => {\n    if (show) {\n      setTimeout(() => {\n        searchInput.current.focus();\n      }, 0);\n    } else {\n      setQuery('');\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [show]);\n  useEffect(() => {\n    setMySelectedIndex(null);\n    resultCount.current = 0;\n    selectedItem.current = {}; // eslint-disable-next-line\n  }, [query]);\n\n  if (data) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: searchInput,\n        id: \"searchPagesInput\",\n        className: \"form-control form-control-xl borderless ps-0 pe-0 mb-1 auto-complete\",\n        type: \"text\",\n        autoComplete: \"off\",\n        onChange: e => setQuery(e.target.value),\n        value: query,\n        placeholder: \"Search for Pages\",\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), query.length > 0 && /*#__PURE__*/_jsxDEV(FuzzyHighlighter, {\n        query: query,\n        data: data,\n        options: {\n          shouldSort: true,\n          includeMatches: true,\n          threshold: 0.6,\n          location: 0,\n          distance: 100,\n          maxPatternLength: 32,\n          minMatchCharLength: 1,\n          keys: ['label']\n        },\n        children: ({\n          formattedResults,\n          results\n        }) => {\n          resultCount.current = Math.min(formattedResults.length, RESULT_LIMIT);\n          selectedItem.current = selectedIndex === null ? {} : results[selectedIndex].item;\n          return results.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n            id: \"searchPagesResults\",\n            className: \"auto-complete-result\",\n            children: formattedResults.slice(0, RESULT_LIMIT).map((formattedResult, resultIndex) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => onResultClick(formattedResult.item.path),\n              className: classNames('auto-complete-result-item', {\n                autoComplete_selected: selectedIndex === resultIndex\n              }),\n              children: [Array.isArray(formattedResult.formatted.label) ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-0\",\n                children: formattedResult.formatted.label.map((t, tIndex) => {\n                  if (t.isHighlighted) {\n                    return /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"autoComplete_highlighted\",\n                      children: t.text\n                    }, tIndex, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 157,\n                      columnNumber: 33\n                    }, this);\n                  }\n\n                  return /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: t.text\n                  }, tIndex, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 36\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-0\",\n                children: formattedResult.formatted.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-small text-muted mb-0 \",\n                children: formattedResult.item.path\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 23\n              }, this)]\n            }, resultIndex, true, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            id: \"searchPagesResults\",\n            className: \"auto-complete-result\",\n            children: /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"no_resulst\",\n              children: \"No Results\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 17\n          }, this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n};\n\n_s(SearchInput, \"zC5Cc4Nprma47fJVKNnvZHb0H+0=\", false, function () {\n  return [useHistory, useSelector, useIntl];\n});\n\n_c = SearchInput;\nexport default SearchInput;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchInput\");","map":{"version":3,"sources":["/Users/harmadini/Work/Free/React/goals_planner_fe/goals_planner_fe/src/layout/nav/search/SearchInput.js"],"names":["React","useMemo","useState","useEffect","useRef","classNames","FuzzyHighlighter","useIntl","useHistory","useSelector","getSearchItems","USE_MULTI_LANGUAGE","routesAndMenuItems","RESULT_LIMIT","SearchInput","show","setShow","history","searchInput","data","setData","query","setQuery","selectedIndex","setSelectedIndex","resultCount","selectedItem","mySelectedIndexRef","setMySelectedIndex","currenData","current","isLogin","currentUser","state","auth","routes","userRole","role","formatMessage","f","onResultClick","path","push","onKeyDown","e","includes","keyCode","rCount","sIndex","sCurrent","formatedRoutes","map","d","label","id","document","addEventListener","removeEventListener","setTimeout","focus","target","value","length","shouldSort","includeMatches","threshold","location","distance","maxPatternLength","minMatchCharLength","keys","formattedResults","results","Math","min","item","slice","formattedResult","resultIndex","autoComplete_selected","Array","isArray","formatted","t","tIndex","isHighlighted","text"],"mappings":"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","sourcesContent":["import React, { useMemo, useState, useEffect, useRef } from 'react';\nimport classNames from 'classnames';\nimport FuzzyHighlighter from 'react-fuzzy-highlighter';\nimport { useIntl } from 'react-intl';\nimport { useHistory } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { getSearchItems } from 'routing/helper';\nimport { USE_MULTI_LANGUAGE } from 'config.js';\nimport routesAndMenuItems from 'routes.js';\n\nconst RESULT_LIMIT = 10;\n\nconst SearchInput = ({ show, setShow }) => {\n  const history = useHistory();\n  const searchInput = useRef(null);\n  const [data, setData] = useState(null);\n  const [query, setQuery] = useState('');\n  const [selectedIndex, setSelectedIndex] = useState(null);\n  const resultCount = React.useRef(0);\n  const selectedItem = React.useRef({});\n  const mySelectedIndexRef = React.useRef(selectedIndex);\n  const setMySelectedIndex = (currenData) => {\n    mySelectedIndexRef.current = currenData;\n    setSelectedIndex(currenData);\n  };\n  const { isLogin, currentUser } = useSelector((state) => state.auth);\n\n  const routes = useMemo(\n    () =>\n      getSearchItems({\n        data: routesAndMenuItems,\n        isLogin,\n        userRole: currentUser.role,\n      })(),\n    [isLogin, currentUser]\n  );\n  const { formatMessage: f } = useIntl();\n\n  const onResultClick = (path) => {\n    if (path) {\n      setShow(false);\n      history.push(path);\n    }\n  };\n\n  const onKeyDown = (e) => {\n    if (![38, 40, 13].includes(e.keyCode)) {\n      return;\n    }\n    const rCount = resultCount.current;\n    const sIndex = mySelectedIndexRef.current;\n    if (rCount <= 0) return;\n\n    if (sIndex === null) {\n      setMySelectedIndex(0);\n      return;\n    }\n\n    if (e.keyCode === 38) {\n      // up\n      setMySelectedIndex(sIndex <= 0 ? rCount - 1 : sIndex - 1);\n    } else if (e.keyCode === 40) {\n      // down\n      setMySelectedIndex(sIndex >= rCount - 1 ? 0 : sIndex + 1);\n    } else {\n      // enter\n      const sCurrent = selectedItem.current;\n      if (sCurrent) {\n        onResultClick(sCurrent.path);\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (USE_MULTI_LANGUAGE) {\n      const formatedRoutes = routes.map((d) => ({\n        ...d,\n        label: f({ id: d.label || 'menu.home' }),\n      }));\n      setData(formatedRoutes);\n    } else {\n      setData(routes);\n    }\n    document.addEventListener('keydown', onKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (show) {\n      setTimeout(() => {\n        searchInput.current.focus();\n      }, 0);\n    } else {\n      setQuery('');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [show]);\n\n  useEffect(() => {\n    setMySelectedIndex(null);\n    resultCount.current = 0;\n    selectedItem.current = {};\n    // eslint-disable-next-line\n  }, [query]);\n\n  if (data) {\n    return (\n      <>\n        <input\n          ref={searchInput}\n          id=\"searchPagesInput\"\n          className=\"form-control form-control-xl borderless ps-0 pe-0 mb-1 auto-complete\"\n          type=\"text\"\n          autoComplete=\"off\"\n          onChange={(e) => setQuery(e.target.value)}\n          value={query}\n          placeholder=\"Search for Pages\"\n          autoFocus\n        />\n        {query.length > 0 && (\n          <FuzzyHighlighter\n            query={query}\n            data={data}\n            options={{\n              shouldSort: true,\n              includeMatches: true,\n              threshold: 0.6,\n              location: 0,\n              distance: 100,\n              maxPatternLength: 32,\n              minMatchCharLength: 1,\n              keys: ['label'],\n            }}\n          >\n            {({ formattedResults, results }) => {\n              resultCount.current = Math.min(formattedResults.length, RESULT_LIMIT);\n              selectedItem.current = selectedIndex === null ? {} : results[selectedIndex].item;\n              return results.length > 0 ? (\n                <ul id=\"searchPagesResults\" className=\"auto-complete-result\">\n                  {formattedResults.slice(0, RESULT_LIMIT).map((formattedResult, resultIndex) => (\n                    <li\n                      key={resultIndex}\n                      onClick={() => onResultClick(formattedResult.item.path)}\n                      className={classNames('auto-complete-result-item', {\n                        autoComplete_selected: selectedIndex === resultIndex,\n                      })}\n                    >\n                      {Array.isArray(formattedResult.formatted.label) ? (\n                        <p className=\"mb-0\">\n                          {formattedResult.formatted.label.map((t, tIndex) => {\n                            if (t.isHighlighted) {\n                              return (\n                                <span key={tIndex} className=\"autoComplete_highlighted\">\n                                  {t.text}\n                                </span>\n                              );\n                            }\n                            return <span key={tIndex}>{t.text}</span>;\n                          })}\n                        </p>\n                      ) : (\n                        <p className=\"mb-0\">{formattedResult.formatted.label}</p>\n                      )}\n                      <p className=\"text-small text-muted mb-0 \">{formattedResult.item.path}</p>\n                    </li>\n                  ))}\n                </ul>\n              ) : (\n                <ul id=\"searchPagesResults\" className=\"auto-complete-result\">\n                  <li className=\"no_resulst\">No Results</li>\n                </ul>\n              );\n            }}\n          </FuzzyHighlighter>\n        )}\n      </>\n    );\n  }\n  return <></>;\n};\n\nexport default SearchInput;\n"]},"metadata":{},"sourceType":"module"}